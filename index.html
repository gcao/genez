<!DOCTYPE html>
<html>
<head>
    <title>Gene Language</title>
</head>
<body>
    <h1>Gene Language WASM Demo</h1>
    <script>
        // Define the imports object that WASM expects
        const importObject = {
            env: {
                // Add any functions that WASM needs to import
                memory: new WebAssembly.Memory({ 
                    initial: 1,
                    maximum: 1
                }),
                
                // Console logging functions
                log: function(n) { console.log(n); },
                log_str: function(ptr, len) {
                    // TODO: Implement string logging from WASM memory
                },
            }
        };

        // Load and instantiate the WASM module
        WebAssembly.instantiateStreaming(
            fetch('zig-out/bin/gene-wasm.wasm'),
            importObject
        ).then(obj => {
            // Store the instance for later use
            window.geneInstance = obj.instance;
            
            // Test the WASM functions
            console.log("WASM module loaded!");
            if (obj.instance.exports.initInterpreter) {
                obj.instance.exports.initInterpreter();
            }
        }).catch(e => {
            console.error("Failed to load WASM:", e);
        });
    </script>
</body>
</html>
