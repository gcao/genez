<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Static Gene in WASM</title>
</head>
<body>
<script>
(async () => {
    // 1) Fetch the WASM module
    const response = await fetch('gene-wasm.wasm');
    const bytes = await response.arrayBuffer();

    // 2) Instantiate
    const { instance } = await WebAssembly.instantiate(bytes, {
        // optionally pass "env" or other imports if needed
    });

    // 3) Call the exported functions
    // e.g. init
    instance.exports.initInterpreter?.();

    // for runGeneCode, we pass pointer/length or define a custom approach
    // you'd likely do a separate function to handle passing strings in memory
    // but let's do a trivial example if your function takes no arguments
    // or we can show how to pass strings in memory, which is more advanced
    instance.exports.runGeneCode?.( /* pointer, length */ );

    console.log("WASM loaded and run");
})();
</script>
</body>
</html>
